<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="gIDGI_MabBjGFLrMRsAGNStyJZrHhySpEi5xk98WDi8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAPALAZI-enjoy!</title>
    <link rel="icon" href="logo.png" type="image/png">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;
            font-family: 'Comfortaa', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .title {
            color: blue;
            font-family: 'Comfortaa', 'Arial', sans-serif;
            font-weight: 500;
            font-size: 24px;
            position: absolute;
            top: 10px;
            left: 10px;
        }
        .current-date {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
            color: blue;
        }
        .image-container {
            position: absolute;
            top: 50px;
            right: 10px;
            display: flex;
            flex-direction: row;
            gap: 10px;
        }
        .image-container img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
        .search-bar {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
        }
        .search-bar input {
            width: 300px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 16px;
        }
        .button-group {
            margin-top: 180px;
            display: flex;
            flex-direction: row;
            gap: 10px;
        }
        .button-group button {
            width: 100px;
            padding: 10px;
            font-size: 14px;
            border: 2px solid blue;
            border-radius: 0;
            background-color: white;
            color: blue;
            cursor: pointer;
        }
        .button-group button:hover {
            background-color: lightblue;
        }
        .posts-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            flex-grow: 1;
            overflow-y: auto;
            margin-top: 20px;
            padding: 10px;
        }
        .post-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            width: 100%;
            max-width: 600px;
        }
        .post-text {
            width: 100%;
        }
        footer {
            background-color: blue;
            color: white;
            text-align: center;
            padding: 10px 0;
            font-size: 14px;
            width: 100%;
        }
        footer .footer-images {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        footer .footer-images img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        /* Custom scrollbar styles */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        ::-webkit-scrollbar-track {
            background-color: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: blue;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: darkblue;
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f44336;
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: none;
        }
        .notification.success {
            background-color: #4CAF50;
        }
        .notification.info {
            background-color: #2196F3;
        }
        .notification.warning {
            background-color: #ff9800;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="title">P a p a l a z i</div>
    <div class="current-date" id="currentDate"></div>
    <div class="image-container" id="imageContainer">
        <img src="https://i.pinimg.com/736x/65/42/59/65425944829bad0ee8699cb9429d0c62.jpg" alt="Image 1">
        <img src="https://i.pinimg.com/736x/38/6c/52/386c5283f14bdca0fa14e28dd18fb574.jpg" alt="Image 2">
    </div>
    <div class="search-bar">
        <input type="text" placeholder="Search...">
    </div>
    <div class="button-group">
        <button id="newButton">NEW</button>
        <button id="trendsButton">TRENDS</button>
        <button id="oldButton">OLD</button>
    </div>

    <div class="posts-container" id="postsContainer">
        <!-- Posts will be dynamically added here -->
    </div>

    <footer>
        &copy; 2025 Papalazi | by btem & COSTA | All rights reserved.
        <div class="footer-images">
            <a href="https://www.instagram.com/_papalazi_/"><img src="https://i.pinimg.com/736x/19/42/d5/1942d5deb0f788e6228054cd92767ff6.jpg" alt="Footer Image 1"></a>
            <a href="login.html"><img src="https://i.pinimg.com/736x/82/e4/51/82e451bede78d774d2aebf37eac00712.jpg" alt="Footer Image 2"> </a> 
        </div>
    </footer>

    <!-- Notification element -->
    <div id="notification" class="notification"></div>

    <!-- Firebase setup script -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-analytics.js";
      
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBRxM7fAfKphRvdj_16NKV3B0hyidCEnrc",
        authDomain: "papalazi.firebaseapp.com",
        databaseURL: "https://papalazi-default-rtdb.firebaseio.com",
        projectId: "papalazi",
        storageBucket: "papalazi.firebasestorage.app",
        messagingSenderId: "1089313728416",
        appId: "1:1089313728416:web:540805c92621638fffa6c5",
        measurementId: "G-EM698RCXK0"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getFirestore(app);

      // Display current date
      const currentDateElement = document.getElementById('currentDate');
      const currentDate = new Date();
      currentDateElement.textContent = currentDate.toLocaleDateString();

      // Fetch posts from Firestore
      async function fetchPosts() {
        const postsContainer = document.getElementById('postsContainer');
        const querySnapshot = await getDocs(collection(db, 'POST'));
        const posts = [];
        querySnapshot.forEach((doc) => {
          const post = doc.data();
          post.id = doc.id;
          posts.push(post);
        });
        return posts;
      }

      // Display posts based on their age
      function displayPosts(posts, filter) {
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = ''; // Clear existing posts

        const currentDate = new Date();
        posts.forEach((post) => {
          const postDate = new Date(post.timestamp.seconds * 1000);
          const diffTime = Math.abs(currentDate - postDate);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

          if (filter === 'new' && diffDays <= 3) {
            addPostToContainer(post);
          } else if (filter === 'old' && diffDays > 3) {
            addPostToContainer(post);
          } else if (filter === 'all') {
            addPostToContainer(post);
          }
        });
      }

      // Add post to the container
      function addPostToContainer(post) {
        const postsContainer = document.getElementById('postsContainer');
        const postContainer = document.createElement('div');
        postContainer.classList.add('post-container');
        
        // Post text (info)
        const postText = document.createElement('div');
        postText.classList.add('post-text');
        postText.textContent = post.info;

        // Post timestamp
        const postTimestamp = document.createElement('div');
        postTimestamp.classList.add('post-timestamp');
        postTimestamp.textContent = `Posted on: ${new Date(post.timestamp.seconds * 1000).toLocaleDateString()} ${new Date(post.timestamp.seconds * 1000).toLocaleTimeString()}`;

        postContainer.appendChild(postText);
        postContainer.appendChild(postTimestamp);
        postsContainer.appendChild(postContainer);
      }

      // Fetch posts on page load
      window.onload = async () => {
        const posts = await fetchPosts();
        displayPosts(posts, 'all'); // Display all posts initially

        // Add event listeners to buttons
        document.getElementById('newButton').addEventListener('click', () => displayPosts(posts, 'new'));
        document.getElementById('oldButton').addEventListener('click', () => displayPosts(posts, 'old'));
        document.getElementById('trendsButton').addEventListener('click', () => displayPosts(posts, 'all'));
      };
    </script>
</body>
</html>
